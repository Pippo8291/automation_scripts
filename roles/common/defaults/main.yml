---
# misc common vars used for all tasks

# fallback / legacy var
REPOBRANCH: undefined

# semaphore working/tmp dir
semaphore_work_dir: /opt/scs-work

# ensure we have a normalized & clean version tag (e.g. removing slashes from a git tag etc)
parsed_target_version: "{{ git_repo_main_branch | regex_replace('.*/','') | regex_replace('^v','') }}"
normalized_target_version: "{{ parsed_target_version | regex_replace('(\\d+)\\.(\\d+)(.*)','\\1.\\2') }}"

# build identifier used in e.g. the filename later
BUILDIDENT: "{{ ansible_date_time.date | regex_replace('-','') }}"
build_id: "{{ semaphore_vars.task_details.target_version }}"

# full path to the repo binary
repo_bin: /home/androidsource/bin/repo

# number of threads used e.g. with repo binary etc
max_processes: 15

# ssh port where the release server is reachable (coming from the build server)
RELEASESVR_port: 22

# backwards compatible var specifying the build device (e.g. hotdog etc)
# should not be changed
BDEVICE: "{{ target_model }}"

# ccache defaults
USE_CCACHE: 1
CCACHE_EXEC: /usr/bin/ccache
CCACHE_COMPRESS: 1
CCACHE_DIR: /ssd/ccache/jenkins/{{ target_model }}-undef

# base url where the user can download released ROMs etc
leech_server: "https://leech.binbash.rocks:8008"

# notification icons
ICON_GOOD: üéâ
ICON_BAD: ‚ò†Ô∏è

# default to false
custom_release_script: false

# build vars
rempath: "/home/nightlies/roms/{{ ROM_FLAVOR }}/{{ android_shortversion }}/{{ target_model }}/"
JKZIPDIR: "/ssd/tmp/{{ ROM_FLAVOR }}/zips/{{ target_model }}"
SRCPATH: "/home/androidsource/do-not-touch/{{ ROM_FLAVOR }}"
post_cleanup_product_dir: "{{ SRCPATH }}/out/target/product/{{ target_model }}"
SEPARATE_OUT_DIR: "/ssd/{{ target_model }}/{{ ROM_FLAVOR }}-{{ android_shortversion }}/out"
manifest_paths_file: "/tmp/manifest_paths.{{ ROM_FLAVOR }}"
# build signing
sign_build: true
keysdir: '/home/androidsource/do-not-touch/KEYS/{{ ROM_FLAVOR }}-{{ android_shortversion }}_{{ target_model }}'

# set override defaults
override_clean_basic: 'undef'
override_clean_out: 'undef'
override_reset_git: 'undef'
override_release_build: 'undef'
override_sync: 'undef'
